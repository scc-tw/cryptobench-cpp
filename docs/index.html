<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto-Bench Performance Analytics Dashboard</title>

    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

    <!-- Custom styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app" class="dashboard">
        <!-- Header Section -->
        <header class="dashboard-header">
            <div class="header-content">
                <h1>üöÄ Crypto-Bench Performance Analytics</h1>
                <p class="subtitle">Comprehensive Cryptographic Library Performance Analysis</p>
                <div class="header-stats" id="headerStats">
                    <div class="stat-badge">
                        <span class="stat-value" id="totalBenchmarks">-</span>
                        <span class="stat-label">Benchmarks</span>
                    </div>
                    <div class="stat-badge">
                        <span class="stat-value" id="totalLibraries">-</span>
                        <span class="stat-label">Libraries</span>
                    </div>
                    <div class="stat-badge">
                        <span class="stat-value" id="totalAlgorithms">-</span>
                        <span class="stat-label">Algorithms</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="dashboard-nav">
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="overview">
                    <span class="tab-icon">üìä</span>
                    Executive Summary
                </button>
                <button class="nav-tab" data-tab="trends">
                    <span class="tab-icon">üìà</span>
                    Performance Trends
                </button>
                <button class="nav-tab" data-tab="comparison">
                    <span class="tab-icon">‚öñÔ∏è</span>
                    Library Comparison
                </button>
                <button class="nav-tab" data-tab="detailed">
                    <span class="tab-icon">üîç</span>
                    Detailed Analysis
                </button>
                <button class="nav-tab" data-tab="pgo">
                    <span class="tab-icon">‚ö°</span>
                    PGO Impact
                </button>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="dashboard-main">
            <!-- Data Source Section -->
            <section class="data-source-section">
                <div class="data-source-card">
                    <h3>üìÅ Data Source</h3>
                    <div class="data-controls">
                        <input type="text" id="dataUrl" placeholder="Enter result.json URL or path" value="result.json" class="data-input">
                        <button class="btn btn-primary" onclick="dashboard.loadData()">
                            Load Data
                        </button>
                        <button class="btn btn-secondary" onclick="dashboard.loadSampleData()">
                            Load Default
                        </button>
                    </div>
                    <div id="loadingIndicator" class="loading-indicator" style="display: none;">
                        <div class="spinner"></div>
                        <span>Loading benchmark data...</span>
                    </div>
                </div>
            </section>

            <!-- Tab Content Panels -->
            <div class="tab-content">
                <!-- Overview Tab -->
                <div id="overview-tab" class="tab-panel active">
                    <!-- Composite Score Section -->
                    <section class="dashboard-section">
                        <h2 class="section-title">üèÜ Overall Performance Score (Most First Places)</h2>
                        <div class="score-grid">
                            <div class="score-card" id="winnerCard">
                                <h3>Top Performer</h3>
                                <div class="winner-display">
                                    <div class="library-name" id="topLibrary">-</div>
                                    <div class="composite-score" id="topScore">-</div>
                                    <div class="score-label">Medal Count (ÁçéÁâåÊï∏)</div>
                                </div>
                            </div>
                            <div class="chart-container">
                                <canvas id="radarChart"></canvas>
                            </div>
                        </div>
                    </section>

                    <!-- Category Performance -->
                    <section class="dashboard-section">
                        <h2 class="section-title">üìä Performance by Category</h2>
                        <div class="chart-container large">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </section>

                    <!-- Quick Stats Grid -->
                    <section class="dashboard-section">
                        <h2 class="section-title">‚ö° Performance Highlights</h2>
                        <div class="highlights-grid" id="highlightsGrid">
                            <!-- Dynamically populated -->
                        </div>
                    </section>
                </div>

                <!-- Trends Tab -->
                <div id="trends-tab" class="tab-panel">
                    <!-- Filter Controls -->
                    <section class="filter-section">
                        <div class="filter-controls">
                            <div class="filter-group">
                                <label>Library</label>
                                <select id="trendLibrary" class="filter-select">
                                    <option value="all">All Libraries</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>Algorithm</label>
                                <select id="trendAlgorithm" class="filter-select">
                                    <option value="all">All Algorithms</option>
                                </select>
                            </div>
                            <button class="btn btn-primary" onclick="dashboard.updateTrends()">
                                Update Chart
                            </button>
                        </div>
                    </section>

                    <!-- Trend Charts -->
                    <section class="dashboard-section">
                        <h2 class="section-title">üìà Throughput vs Block Size Trends</h2>
                        <div class="chart-container large">
                            <canvas id="trendChart"></canvas>
                        </div>
                    </section>

                    <!-- Scalability Analysis -->
                    <section class="dashboard-section">
                        <h2 class="section-title">üìê Scalability Analysis</h2>
                        <div class="chart-container">
                            <canvas id="scalabilityChart"></canvas>
                        </div>
                    </section>
                </div>

                <!-- Comparison Tab -->
                <div id="comparison-tab" class="tab-panel">
                    <!-- Comparison Controls -->
                    <section class="filter-section">
                        <div class="filter-controls">
                            <div class="filter-group">
                                <label>Algorithm Category</label>
                                <select id="compCategory" class="filter-select">
                                    <option value="hash">Hash Functions</option>
                                    <option value="symmetric">Symmetric Encryption</option>
                                    <option value="mac">Message Authentication</option>
                                    <option value="asymmetric">Asymmetric Crypto</option>
                                    <option value="kex">Key Exchange</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>Block Size</label>
                                <select id="compBlockSize" class="filter-select">
                                    <option value="1024">1024 bytes</option>
                                    <option value="64">64 bytes</option>
                                    <option value="256">256 bytes</option>
                                    <option value="4096">4096 bytes</option>
                                    <option value="16384">16384 bytes</option>
                                </select>
                            </div>
                            <button class="btn btn-primary" onclick="dashboard.updateComparison()">
                                Compare
                            </button>
                        </div>
                    </section>

                    <!-- Library Comparison Chart -->
                    <section class="dashboard-section">
                        <h2 class="section-title">‚öñÔ∏è Cross-Library Performance Comparison</h2>
                        <div class="chart-container large">
                            <canvas id="comparisonChart"></canvas>
                        </div>
                    </section>

                    <!-- Head-to-Head Matrix -->
                    <section class="dashboard-section">
                        <h2 class="section-title">üéØ Head-to-Head Performance Matrix</h2>
                        <div class="matrix-container" id="performanceMatrix">
                            <!-- Dynamically populated -->
                        </div>
                    </section>
                </div>

                <!-- Detailed Analysis Tab -->
                <div id="detailed-tab" class="tab-panel">
                    <!-- Algorithm Deep Dive -->
                    <section class="filter-section">
                        <div class="filter-controls">
                            <div class="filter-group">
                                <label>Select Algorithm</label>
                                <select id="detailAlgorithm" class="filter-select">
                                    <option value="">Choose an algorithm...</option>
                                </select>
                            </div>
                            <button class="btn btn-primary" onclick="dashboard.analyzeAlgorithm()">
                                Analyze
                            </button>
                        </div>
                    </section>

                    <!-- Statistical Analysis -->
                    <section class="dashboard-section">
                        <h2 class="section-title">üìä Statistical Analysis</h2>
                        <div class="stats-grid" id="statsGrid">
                            <!-- Dynamically populated -->
                        </div>
                    </section>

                    <!-- Performance Table -->
                    <section class="dashboard-section">
                        <h2 class="section-title">üìã Detailed Performance Data</h2>
                        <div class="table-controls">
                            <input type="text" id="tableSearch" placeholder="Search..." class="search-input">
                            <select id="tableSort" class="filter-select">
                                <option value="throughput">Sort by Throughput</option>
                                <option value="library">Sort by Library</option>
                                <option value="algorithm">Sort by Algorithm</option>
                            </select>
                            <button class="btn btn-secondary" onclick="dashboard.exportData()">
                                Export CSV
                            </button>
                        </div>
                        <div class="table-container">
                            <table id="dataTable" class="data-table">
                                <thead>
                                    <tr>
                                        <th>Library</th>
                                        <th>Algorithm</th>
                                        <th>Block Size</th>
                                        <th>Throughput (MB/s)</th>
                                        <th>CPU Time (Œºs)</th>
                                        <th>Std Dev</th>
                                        <th>CV (%)</th>
                                    </tr>
                                </thead>
                                <tbody id="tableBody">
                                    <!-- Dynamically populated -->
                                </tbody>
                            </table>
                        </div>
                    </section>
                </div>

                <!-- PGO Impact Tab -->
                <div id="pgo-tab" class="tab-panel">
                    <!-- PGO Data Availability Notice -->
                    <section class="filter-section" id="pgoAvailability">
                        <div class="filter-controls">
                            <div class="filter-group" style="flex: 1;">
                                <label>Available Compilers</label>
                                <select id="pgoCompiler" class="filter-select">
                                    <!-- Dynamically populated -->
                                </select>
                            </div>
                            <div class="filter-group" style="flex: 1;">
                                <label>View Mode</label>
                                <select id="pgoViewMode" class="filter-select">
                                    <option value="percentage">Percentage Improvement</option>
                                    <option value="absolute">Absolute Values</option>
                                    <option value="ratio">Speed Ratio</option>
                                </select>
                            </div>
                            <button class="btn btn-primary" onclick="dashboard.updatePGOAnalysis()">
                                Update Analysis
                            </button>
                        </div>
                        <div id="pgoDataStatus" style="margin-top: 1rem; padding: 1rem; background: #f0f0f0; border-radius: 8px;">
                            <!-- Status message populated dynamically -->
                        </div>
                    </section>

                    <!-- Top PGO Performers -->
                    <section class="dashboard-section">
                        <h2 class="section-title">üèÜ Most Impacted by PGO</h2>
                        <div class="score-grid">
                            <div class="score-card">
                                <h3>Best Library for PGO</h3>
                                <div class="winner-display">
                                    <div class="library-name" id="pgoTopLibrary">-</div>
                                    <div class="composite-score" id="pgoTopLibraryScore">-</div>
                                    <div class="score-label">Average Improvement</div>
                                </div>
                            </div>
                            <div class="score-card">
                                <h3>Best Algorithm for PGO</h3>
                                <div class="winner-display">
                                    <div class="library-name" id="pgoTopAlgorithm">-</div>
                                    <div class="composite-score" id="pgoTopAlgorithmScore">-</div>
                                    <div class="score-label">Average Improvement</div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Library-Level PGO Impact -->
                    <section class="dashboard-section">
                        <h2 class="section-title">üìä PGO Impact by Library (Average Across All Algorithms)</h2>
                        <div class="chart-container large">
                            <canvas id="pgoLibraryChart"></canvas>
                        </div>
                    </section>

                    <!-- Algorithm-Level PGO Impact -->
                    <section class="dashboard-section">
                        <h2 class="section-title">‚ö° PGO Impact by Algorithm (Average Across All Libraries)</h2>
                        <div class="chart-container large">
                            <canvas id="pgoAlgorithmChart"></canvas>
                        </div>
                    </section>

                    <!-- Detailed Comparison: Library + Algorithm -->
                    <section class="dashboard-section">
                        <h2 class="section-title">üî• Detailed: Library √ó Algorithm PGO Impact</h2>
                        <div class="chart-container">
                            <canvas id="pgoHeatmapChart"></canvas>
                        </div>
                    </section>

                    <!-- PGO Statistics -->
                    <section class="dashboard-section">
                        <h2 class="section-title">üìà PGO Statistics Summary</h2>
                        <div class="stats-grid" id="pgoStatsGrid">
                            <!-- Dynamically populated -->
                        </div>
                    </section>

                    <!-- Detailed PGO Comparison Table -->
                    <section class="dashboard-section">
                        <h2 class="section-title">üìã Detailed PGO Comparison (Library + Algorithm + Block Size)</h2>
                        <div class="table-controls">
                            <input type="text" id="pgoTableSearch" placeholder="Search library or algorithm..." class="search-input">
                            <select id="pgoTableSort" class="filter-select">
                                <option value="improvement">Sort by Improvement %</option>
                                <option value="library">Sort by Library</option>
                                <option value="algorithm">Sort by Algorithm</option>
                                <option value="blocksize">Sort by Block Size</option>
                            </select>
                        </div>
                        <div class="table-container">
                            <table id="pgoTable" class="data-table">
                                <thead>
                                    <tr>
                                        <th>Library</th>
                                        <th>Algorithm</th>
                                        <th>Block Size</th>
                                        <th>No PGO (MB/s)</th>
                                        <th>With PGO (MB/s)</th>
                                        <th>Improvement (%)</th>
                                        <th>Speed Ratio</th>
                                    </tr>
                                </thead>
                                <tbody id="pgoTableBody">
                                    <!-- Dynamically populated -->
                                </tbody>
                            </table>
                        </div>
                    </section>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <div class="footer-content">
                <p>Crypto-Bench Performance Dashboard v2.0 |
                   <a href="https://github.com/your-repo/crypto-bench" target="_blank">GitHub</a> |
                   Last updated: <span id="lastUpdated">-</span>
                </p>
            </div>
        </footer>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="modal-close" onclick="dashboard.closeError()">&times;</span>
            <h3>‚ö†Ô∏è Error</h3>
            <p id="errorMessage"></p>
        </div>
    </div>

    <!-- Load Dashboard Script -->
    <script src="dashboard.js"></script>
    <script>
        // Initialize dashboard
        const dashboard = new CryptoBenchDashboard();
    </script>
</body>
</html>